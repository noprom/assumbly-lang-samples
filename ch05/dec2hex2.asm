STACKSG     SEGMENT STACK 'S'
        	DW 64 DUP('ST')
STACKSG     ENDS

DATA	SEGMENT
      CT	DB  0
DATA	ENDS

CODE	 SEGMENT
	ASSUME CS:CODE, DS:DATA, SS:STACKSG
MAIN  PROC  FAR
	
	MOV	AX,DATA
	MOV	DS,AX

	MOV	BX,0
	MOV	AH, 2
	MOV	DL, 0DH
	INT	21H
	MOV	DL, 0AH
	INT	21H

NEWCHAR:
	MOV	AH,1
	INT	21H

	SUB	AL,30H
	JL	BIN2HEX
	CMP	AL,9
	JG	BIN2HEX
	CBW
	
	XCHG	AX,BX
	MOV	CX,10	
	MUL	CX
	XCHG	AX,BX	
	ADD	BX,AX
	
	INC	CT	
	JMP	NEWCHAR

BIN2HEX:
	
	PUSH	BX
	
	MOV	AH, 3
	MOV	BH, 0
	INT	10H
	
	MOV	AH, 2
	MOV	DL,CT	
	INT	10H
	
	MOV	AH, 2
	MOV	DL, 'D'
	INT	21H
	
	MOV	DL,'='
	INT	21H
	
	POP	BX
	MOV	CH,4

ROTATE:
	MOV	CL,4
	ROL	BX,CL
	MOV	AL,BL
	AND	AL,0FH
	OR	AL,30H
	CMP	AL,3AH
	JL	PRINT
	ADD	AL,7

PRINT:
	MOV	AH,2
	MOV	DL,AL
	INT	21H
	
	DEC	CH
	JNZ	ROTATE
	
	MOV	DL,'H'
	INT	21H
	
	MOV	AH, 2
	MOV	DL, 0DH
	INT	21H
	MOV	DL, 0AH
	INT	21H
	
	MOV	AX,4C00H
	INT	21H
	
MAIN	ENDP
CODE	ENDS
	END	MAIN
	
	